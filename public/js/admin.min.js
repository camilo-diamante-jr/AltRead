if (!window.PDFGallery) {
  class PDFGallery {
    constructor() {
      this.init();
    }

    init() {
      AOS.init();
      this.setupFancybox();
    }

    setupFancybox() {
      $('[data-fancybox="pdf-gallery"]').on("click", (event) => {
        event.preventDefault(); // Prevent default action

        const link = $(event.currentTarget).attr("href"); // Get the link from the clicked element

        // Check if the link is valid
        this.checkLink(link);
      });
    }

    checkLink(link) {
      $.ajax({
        url: link,
        type: "HEAD", // Use HEAD request to check if the link exists
        success: () => {
          // If the link is valid, open Fancybox
          $.fancybox.open({
            src: link,
            type: "iframe",
            opts: {
              iframe: {
                css: {
                  width: "95%", // Adjust width as needed
                  margin: "auto",
                  height: "95%", // Adjust height as needed
                },
                preload: true,
              },
              // Disable Fancybox navigation controls (arrows, toolbar)
              toolbar: false,
              infobar: false,
              arrows: false,
            },
          });
        },
        error: (xhr, status, error) => {
          // If the link is not found, display a user-friendly error message
          this.showErrorMessage("PDF Not Found");
        },
      });
    }

    showErrorMessage(message) {
      // You can customize this method to display the error in a modal, toast, or other ways
      alert(message); // Example: You can replace this with your own error display method
    }
  }
}
